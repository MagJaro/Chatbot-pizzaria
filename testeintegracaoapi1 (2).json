{"flow":{"onboarding":{"$contentActions":[{"input":{"bypass":false,"$cardContent":{"document":{"id":"9ec3b80c-2717-4bae-b625-60a3c82e3f43","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":false,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"e8bad9dd-89fd-4cfc-bb22-384f7242a465","conditions":[{"source":"input","comparison":"matches","values":[".*"]}],"$id":"ebf92c94-ea10-44f1-bedd-bb8c24796e4a","$connId":"con_3","$invalid":false,"typeOfStateId":"state"}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"onboarding","root":true,"$title":"Início","$position":{"top":"577px","left":"1101px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fallback":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"8310917e-413b-4328-b6f5-7c06e7ae805e","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"error","conditions":[{"source":"input","comparison":"matches","values":[".*"]}],"$id":"b1b3f6c2-ef4b-42ec-a569-88b42ae5841f","$connId":"con_8","$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"fallback","$title":"Exceções","$position":{"top":"203px","left":"1354px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"error":{"$contentActions":[{"action":{"$id":"b260600e-9fce-4c20-88bf-9ae3edc1a6c0","$typeOfContent":"","type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000002","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000002","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false},{"action":{"$id":"1bd99638-f2c2-4f8f-9161-870d90760c78","$typeOfContent":"","type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000003","type":"text/plain","content":"{{Desculpa, não consegui entender! | Não entendi, envie a pergunta de outra forma. | Por favor, escreva de forma diferente. | Sobre isso ainda não sei falar.}}\n","metadata":{"#message.spinText":"true"}},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000003","type":"text/plain","content":"{{Desculpa, não consegui entender! | Não entendi, envie a pergunta de outra forma. | Por favor, escreva de forma diferente. | Sobre isso ainda não sei falar.}}\n"},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"9cf52785-b511-4cc5-9b9c-fee050590caa","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"error","$title":"Erro padrão","$position":{"top":"203px","left":"1575px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"3b243741-62a7-482c-bd15-05f0c2b7bec6":{"$contentActions":[{"action":{"$id":"d1281374-a159-46d7-b9dd-5d716ec7f9c7","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"b87e8b5e-5a16-4a14-a305-b854bece1e17","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"b87e8b5e-5a16-4a14-a305-b854bece1e17","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"be4dee29-50b9-41f4-ba38-64a1ea3d9a5b","$typeOfContent":"text","type":"SendMessage","settings":{"id":"c601a7cf-36ce-4ba1-88d5-7e8c316f8fe9","type":"text/plain","content":"{{cardapioTexto}}<br/>","metadata":{}},"$cardContent":{"document":{"id":"c601a7cf-36ce-4ba1-88d5-7e8c316f8fe9","type":"text/plain","content":"{{cardapioTexto}}<br/>"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"7807cd40-df79-4283-93ac-98b91375c8f9","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"3b431a85-30b2-45b9-8de0-adb9f5e6c404","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"3b431a85-30b2-45b9-8de0-adb9f5e6c404","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"2b8880aa-7ea8-4009-be16-4989408c21de","$typeOfContent":"select-immediate","type":"SendMessage","settings":{"id":"fd0b8140-ccdb-4224-b6f4-f2e7b96ea4c4","type":"application/vnd.lime.select+json","content":{"text":"Ver mais opções?","scope":"immediate","options":[{"text":"Sim","previewText":"Sim","value":null,"index":0,"type":null},{"index":-1,"text":"Não","previewText":"Não","type":null,"value":null}]},"metadata":{}},"$cardContent":{"document":{"id":"fd0b8140-ccdb-4224-b6f4-f2e7b96ea4c4","type":"application/vnd.lime.select+json","content":{"text":"Ver mais opções?","scope":"immediate","options":[{"text":"Sim","previewText":"Sim","value":null,"index":0,"type":null},{"index":-1,"text":"Não","previewText":"Não","type":null,"value":null}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"72853e84-a49a-433b-bbd3-df4e5b93bfc4","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"e300265d-6829-4f22-a971-0b250b5c4fd8","typeOfStateId":"state","$connId":"con_13","$id":"d70bf098-54ab-4d18-853a-1fd904d9fa9e","conditions":[{"source":"input","comparison":"contains","values":["Sim"]}],"$invalid":false},{"stateId":"b9a733d3-1363-46a0-ae26-a2784b2adf59","typeOfStateId":"state","$connId":"con_18","$id":"fd336fa6-2ace-4086-882c-1d04442ad399","conditions":[{"source":"input","comparison":"equals","values":["Não"]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"4e582cda-5e32-4998-a03d-1ccfa3035567","$typeOfContent":"","type":"ProcessHttp","$title":"Requisição HTTP - Mostrar cardápio","$invalid":false,"settings":{"headers":{},"method":"GET","uri":"https://api-rest-magda.herokuapp.com/cardapio","responseBodyVariable":"cardapio"},"conditions":[]},{"$id":"71d2f426-7f33-4e27-9ef4-c8e98c07d8ab","$typeOfContent":"","type":"ExecuteScript","$title":"Executar script paginação + mostrar cardápio","$invalid":false,"settings":{"function":"run","source":"//srcript para mostrar o cardápio completo \n// function run(cardapio) {\n//                 cardapio = JSON.parse(cardapio)\n//                 let text = '';\n//                 cardapio.forEach(e => {\n//                     text += ` ${e.id} - Pizza ${e.sabor}: R$ ${e.preco} reais <br/>` \n//                 })\n//                 return text;  \n//             }\n\n//script para execução de paginação + mostrar cardápio \nfunction run(cardapio, paginacao) {\n                cardapio = JSON.parse(cardapio)\n                paginacao = JSON.parse(paginacao)\n\n                let text = ''\n                let inicio = paginacao * 5\n                let fim = inicio + 5\n\n\n                for(let i=inicio; i < fim; i++){\n                    text += ` ${cardapio[i].id} - Pizza ${cardapio[i].sabor}: R$ ${cardapio[i].preco} reais <br/>` \n                }\n                return text;  \n            }\n\n        ","inputVariables":["cardapio","paginacao"],"outputVariable":"cardapioTexto","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":["Sim","Não"],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#7762E3","label":"Process HTTP","id":"blip-tag-fa2787d2-31fa-f42c-20b4-329376e1776e","canChangeBackground":false},{"background":"#FF6F1E","label":"Execute script","id":"blip-tag-19b4f87e-2d0c-3a6e-d46f-6c402c782b4e","canChangeBackground":false}],"id":"3b243741-62a7-482c-bd15-05f0c2b7bec6","root":false,"$title":"Cardápio pizzas","$position":{"top":"330px","left":"833px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"52c399fb-3a56-400c-adae-584c5393f64f":{"$contentActions":[{"action":{"$id":"b4c71b3a-b4e4-444b-8461-48721a11315a","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"938f35f6-2c3c-4896-8aba-9cb78b670d93","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"938f35f6-2c3c-4896-8aba-9cb78b670d93","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"78cf1a71-d0ca-4525-8146-2a4294ca7fc8","$typeOfContent":"text","type":"SendMessage","settings":{"id":"ea09beef-275b-4d1a-a13d-3a495477478c","type":"text/plain","content":"Você selecionou a pizza sabor {{pizzaEscolhida@sabor}}.","metadata":{}},"$cardContent":{"document":{"id":"ea09beef-275b-4d1a-a13d-3a495477478c","type":"text/plain","content":"Você selecionou a pizza sabor {{pizzaEscolhida@sabor}}."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"fa7163be-2c72-499b-81c7-8500813dd706","$typeOfContent":"text","type":"SendMessage","settings":{"id":"e9ac89dc-7fef-45f7-b88e-a022208c59d3","type":"text/plain","content":"Aguarde um instante.","metadata":{}},"$cardContent":{"document":{"id":"e9ac89dc-7fef-45f7-b88e-a022208c59d3","type":"text/plain","content":"Aguarde um instante."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"a53a3d44-17b9-4167-8230-0730d604eb52","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"0a663a44-6ebf-4378-bdd1-58b32d3bb71e","typeOfStateId":"state","$connId":"con_23","$id":"e7112614-0001-41e5-a98a-d994f1cb4246","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"3fdec7ea-ac5b-45ec-a143-a8d9eb867608","$typeOfContent":"","type":"ExecuteScript","$title":"Executar script Pizza escolhida","$invalid":false,"settings":{"function":"run","source":"            //retorna a pizza escolhida\n            function run(cardapio, pizzaID) {\n                cardapio = JSON.parse(cardapio)\n                pizzaID = JSON.parse(pizzaID)\n                return cardapio.find(e => e.id===pizzaID)\n            }","inputVariables":["cardapio","pizzaID"],"outputVariable":"pizzaEscolhida","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF6F1E","label":"Execute script","id":"blip-tag-19b4f87e-2d0c-3a6e-d46f-6c402c782b4e","canChangeBackground":false}],"id":"52c399fb-3a56-400c-adae-584c5393f64f","root":false,"$title":"Exibe pedido","$position":{"top":"617px","left":"833px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"0ec7dbfe-ba3c-4dd9-87aa-940cbf9e9ee1":{"$contentActions":[{"action":{"$id":"47bfca65-f462-400f-b2b7-a7fc27793a06","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"edbbee75-9269-428b-ac41-0bc4eef96c91","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"edbbee75-9269-428b-ac41-0bc4eef96c91","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"a78ddcce-0cc3-4ae3-8099-f92d64650a9a","$typeOfContent":"text","type":"SendMessage","settings":{"id":"e0f8b1fa-559f-44b6-8e67-ae2840aebf6c","type":"text/plain","content":"Certo! Irei te redirecionar para o cardápio novamente. ","metadata":{}},"$cardContent":{"document":{"id":"e0f8b1fa-559f-44b6-8e67-ae2840aebf6c","type":"text/plain","content":"Certo! Irei te redirecionar para o cardápio novamente. "},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"f1e95bf0-e467-4123-9075-2f756cfba0af","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"3b243741-62a7-482c-bd15-05f0c2b7bec6","typeOfStateId":"state","$connId":"con_28","$id":"12f5c7bf-efdf-4427-8379-3bf8bea4cab6","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"0ec7dbfe-ba3c-4dd9-87aa-940cbf9e9ee1","root":false,"$title":"Adicionar nova pizza","$position":{"top":"595px","left":"316px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"510b4bda-93ec-41a0-896b-0d9025d771df":{"$contentActions":[{"action":{"$id":"d70b65ac-3d35-47a3-90e8-675b1335f7ce","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"5f1f7229-0c41-495d-ac8b-94f50ac6a9a1","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"5f1f7229-0c41-495d-ac8b-94f50ac6a9a1","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"1b4fc6b3-27dc-49b5-a1d6-3c34ffa314ba","$typeOfContent":"text","type":"SendMessage","settings":{"id":"650fd5f4-083a-489e-930f-953471c867db","type":"text/plain","content":"{{resumoPedido}}","metadata":{}},"$cardContent":{"document":{"id":"650fd5f4-083a-489e-930f-953471c867db","type":"text/plain","content":"{{resumoPedido}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"18c50875-ca28-4177-bdb9-ea812b1bc0fc","$typeOfContent":"text","type":"SendMessage","settings":{"id":"375d47aa-8966-41a4-b0eb-5b6363e00d68","type":"text/plain","content":"Estamos quase no fim...","metadata":{}},"$cardContent":{"document":{"id":"375d47aa-8966-41a4-b0eb-5b6363e00d68","type":"text/plain","content":"Estamos quase no fim..."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"f00ed55b-458c-4122-b0b8-bd0f0e52b8b1","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"dd3977e6-51af-4cbe-b6bc-78621a448df9","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"dd3977e6-51af-4cbe-b6bc-78621a448df9","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"fc5aec19-5e37-4224-b4ff-b94ab4051ca0","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"1aae9a4c-c23c-416d-98bc-e8c6b5ff56ba","typeOfStateId":"state","$connId":"con_33","$id":"46164a51-6c35-4144-8464-cc6403d05535","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"0d5e48dc-e5ff-42fc-a06a-84dc7c10328f","$typeOfContent":"","type":"ProcessHttp","$title":"Requisição HTTP","$invalid":false,"settings":{"headers":{},"method":"GET","uri":"https://api-rest-magda.herokuapp.com/pedidos/{{uuid}}","responseBodyVariable":"pedidoFinal"},"conditions":[]},{"$id":"83705e47-da00-4241-809f-e81092d57ab7","$typeOfContent":"","type":"ExecuteScript","$title":"Executar script Pedido final","$invalid":false,"settings":{"function":"run","source":"//função para extrair os sabores e preços do array pedidoFinal\n//toLocateString => formata o valor para real \n\nfunction run(pedidoFinal) {\n    pedidoFinal = JSON.parse(pedidoFinal)\n    let sabores = ''\n    let precoFinal = 0\n\n    pedidoFinal.forEach(e => {\n        sabores += `${e.sabor}, `\n        precoFinal += parseInt(e.preco)\n    })\n\n    let precoFinal = precoFinal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })\n\n    return `Você escolheu ${sabores} e o valor final ficou R$ ${precoFinal}`\n}   ","inputVariables":["pedidoFinal"],"outputVariable":"resumoPedido","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#7762E3","label":"Process HTTP","id":"blip-tag-fa2787d2-31fa-f42c-20b4-329376e1776e","canChangeBackground":false},{"background":"#FF6F1E","label":"Execute script","id":"blip-tag-19b4f87e-2d0c-3a6e-d46f-6c402c782b4e","canChangeBackground":false}],"id":"510b4bda-93ec-41a0-896b-0d9025d771df","root":false,"$title":"Fechar pedido","$position":{"top":"776px","left":"1088px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"0a663a44-6ebf-4378-bdd1-58b32d3bb71e":{"$contentActions":[{"action":{"$id":"e82b7186-79cb-41d6-a8cf-0807441d1535","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"93b639a3-664e-42c1-b05c-a0a004e2fd95","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"93b639a3-664e-42c1-b05c-a0a004e2fd95","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"4fd3d793-7de9-4255-b8dd-944a261f565c","$typeOfContent":"select-immediate","type":"SendMessage","settings":{"id":"f09724aa-0590-466f-992b-02c8277a4ac8","type":"application/vnd.lime.select+json","content":{"text":"Deseja pedir mais alguma pizza ou finalizar pedido?","scope":"immediate","options":[{"text":"Pedir mais um item","previewText":"Pedir mais um item","value":null,"index":0,"type":null},{"text":"Finalizar pedido","previewText":"Finalizar pedido","value":null,"index":1,"type":null}]},"metadata":{}},"$cardContent":{"document":{"id":"f09724aa-0590-466f-992b-02c8277a4ac8","type":"application/vnd.lime.select+json","content":{"text":"Deseja pedir mais alguma pizza ou finalizar pedido?","scope":"immediate","options":[{"text":"Pedir mais um item","previewText":"Pedir mais um item","value":null,"index":0,"type":null},{"text":"Finalizar pedido","previewText":"Finalizar pedido","value":null,"index":1,"type":null}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"e1cc025b-4511-42d4-b3fc-a4856b0ec3c4","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false},{"action":{"$id":"828f5018-2b35-4b4e-804f-f04cba33aed5","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"7bb754d1-b3f2-4967-b3bf-a7ae221ff34f","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000},"metadata":{"#stateName":"{{state.name}}","#stateId":"{{state.id}}","#messageId":"{{input.message@id}}","#previousStateId":"{{state.previous.id}}","#previousStateName":"{{state.previous.name}}"}},"$cardContent":{"document":{"id":"7bb754d1-b3f2-4967-b3bf-a7ae221ff34f","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false}],"$conditionOutputs":[{"stateId":"0ec7dbfe-ba3c-4dd9-87aa-940cbf9e9ee1","typeOfStateId":"state","$connId":"con_38","$id":"e31aec8c-979d-46fa-b417-390f961a5d71","conditions":[{"source":"input","comparison":"equals","values":["Pedir mais um item"]}],"$invalid":false},{"stateId":"510b4bda-93ec-41a0-896b-0d9025d771df","typeOfStateId":"state","$connId":"con_43","$id":"b7431302-b65b-483a-b334-3bd99d0e135e","conditions":[{"source":"input","comparison":"equals","values":["Finalizar pedido"]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"b8cb49c2-9083-4fe4-b426-9fd7f3056cdf","$typeOfContent":"","type":"ProcessHttp","$title":"Requisição HTTP - Mostra pedido","$invalid":false,"settings":{"headers":{},"method":"POST","body":"{\n    \"uuid\": \"{{uuid}}\",\n    \"sabor\":\"{{pizzaEscolhida@sabor}}\",\n    \"preco\": \"{{pizzaEscolhida@preco}}\"\n}","uri":"https://api-rest-magda.herokuapp.com/pedidos/"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":["Pedir mais um item","Finalizar pedido"],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#7762E3","label":"Process HTTP","id":"blip-tag-fa2787d2-31fa-f42c-20b4-329376e1776e","canChangeBackground":false}],"id":"0a663a44-6ebf-4378-bdd1-58b32d3bb71e","root":false,"$title":"Pedido: Tomada de decisão","$position":{"top":"765px","left":"833px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"1aae9a4c-c23c-416d-98bc-e8c6b5ff56ba":{"$contentActions":[{"action":{"$id":"21a3c191-a6ec-488f-80df-3895b9ba97e6","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"bd0d5ea8-2ef2-4eac-8013-cbcfe9b40d33","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"bd0d5ea8-2ef2-4eac-8013-cbcfe9b40d33","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"436c6809-4a2f-43c4-8af4-d6f12a3c9faf","$typeOfContent":"text","type":"SendMessage","settings":{"id":"b02adf72-6bfe-4f28-805b-09e38a65fb47","type":"text/plain","content":"Para que possamos enviar seu pedido, por favor nos informe seu CEP.","metadata":{}},"$cardContent":{"document":{"id":"b02adf72-6bfe-4f28-805b-09e38a65fb47","type":"text/plain","content":"Para que possamos enviar seu pedido, por favor nos informe seu CEP."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"784cb338-a55a-48ea-85d0-04e400ab20ad","type":"text/plain","textContent":"Entrada do usuário","content":"cep"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"cep"},"$invalid":false}],"$conditionOutputs":[{"stateId":"ee6d4963-5093-4090-96b8-d74aa3c0f902","typeOfStateId":"state","$connId":"con_48","$id":"b7135054-55cf-4bd8-ab2d-5b76a4a9e952","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"1aae9a4c-c23c-416d-98bc-e8c6b5ff56ba","root":false,"$title":"Localização cliente","$position":{"top":"927px","left":"1088px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"ee6d4963-5093-4090-96b8-d74aa3c0f902":{"$contentActions":[{"action":{"$id":"98613114-56f8-43de-9957-b04a6aea3cfe","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"f4cc54e3-a988-4e9c-9947-718599912cb4","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"f4cc54e3-a988-4e9c-9947-718599912cb4","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"d3eb9eca-b3c1-4078-abc0-09cdf797127e","$typeOfContent":"text","type":"SendMessage","settings":{"id":"97a58b93-8ef1-4c7d-874b-1d3b30d99c67","type":"text/plain","content":"Ok! Já estou com seu endereço.","metadata":{}},"$cardContent":{"document":{"id":"97a58b93-8ef1-4c7d-874b-1d3b30d99c67","type":"text/plain","content":"Ok! Já estou com seu endereço."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"20939bee-e887-4713-a136-935615eff799","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"bdd07121-77ed-4c39-96a6-7404045a8dbb","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"bdd07121-77ed-4c39-96a6-7404045a8dbb","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"62882377-3fef-4fdb-a662-f075a3160347","$typeOfContent":"text","type":"SendMessage","settings":{"id":"607c156e-f0de-463c-a380-af85012b1c26","type":"text/plain","content":"Dados da sua localização: {{retornaLocalizacao}}","metadata":{}},"$cardContent":{"document":{"id":"607c156e-f0de-463c-a380-af85012b1c26","type":"text/plain","content":"Dados da sua localização: {{retornaLocalizacao}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"12b047e9-48ac-41e4-8049-b2940628bf23","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"32760422-4b03-4d56-8175-55801eecd9c7","typeOfStateId":"state","$connId":"con_53","$id":"f00c2fc0-eae6-4257-ba06-513be67aba58","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"9f1fa23b-9d29-42b9-b074-6c3dcc13548b","$typeOfContent":"","type":"ProcessHttp","$title":"Requisição HTTP Buscar CEP","$invalid":false,"settings":{"headers":{},"method":"GET","uri":"https://api-rest-magda.herokuapp.com/cep/{{cep}}","responseStatusVariable":"","responseBodyVariable":"respostaCep"},"conditions":[]},{"$id":"9d2892d6-7a25-453f-ad13-98559a9f89e4","$typeOfContent":"","type":"ExecuteScript","$title":"Executar script Retorna info do cep","$invalid":false,"settings":{"function":"run","source":"// const run = (response, cep) => {\n// let teste = '';\n// response = JSON.parse(response);\n\n// response.map((response) => {\n//     let { Estado, Cidade, Bairro, Rua, Complemento } = response;\n   \n//     teste += `Estado: ${Estado}\\nCidade: ${Cidade}\\nBairro: ${Bairro}\\nRua: ${Rua}\\nComplemento: ${Complemento}\\n\\n`\n// });\n\n// return teste;\n\n// }\n\nfunction run(respostaCep) {\n    respostaCep = JSON.parse(respostaCep)\n    let resposta = ''\n\n    resposta = `Estado: ${respostaCep.Estado}<br/>\n    Cidade: ${respostaCep.Cidade}<br/>\n    Bairro: ${respostaCep.Bairro}<br/>\n    Rua: ${respostaCep.Rua}<br/>\n    Complemento: ${respostaCep.Complemento}.`\n\n    return resposta;\n}","inputVariables":["respostaCep"],"outputVariable":"retornaLocalizacao","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false,"typeOfStateId":"state"},"$tags":[{"background":"#7762E3","label":"Process HTTP","id":"blip-tag-fa2787d2-31fa-f42c-20b4-329376e1776e","canChangeBackground":false},{"background":"#FF6F1E","label":"Execute script","id":"blip-tag-19b4f87e-2d0c-3a6e-d46f-6c402c782b4e","canChangeBackground":false}],"id":"ee6d4963-5093-4090-96b8-d74aa3c0f902","root":false,"$title":"Busca CEP - API","$position":{"top":"916px","left":"1339px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"32760422-4b03-4d56-8175-55801eecd9c7":{"$contentActions":[{"action":{"$id":"5fe3d97a-0290-4ff9-8a69-2bea43b0246c","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"a1033f09-8afa-49f7-887a-686e788242a7","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"a1033f09-8afa-49f7-887a-686e788242a7","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"9ef3ed15-0bc4-4376-b989-6b4351fbae84","$typeOfContent":"text","type":"SendMessage","settings":{"id":"b1bb111a-9764-46e3-9698-cf3bed6d19e8","type":"text/plain","content":"{{fim}}","metadata":{}},"$cardContent":{"document":{"id":"b1bb111a-9764-46e3-9698-cf3bed6d19e8","type":"text/plain","content":"{{fim}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"06b7929d-ba0f-43a0-a69d-b1ff6c8021d4","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"21d0f483-bc18-4f3a-acd0-bc2ff67d5f07","$typeOfContent":"","type":"ExecuteScript","$title":"Executar script despedida","$invalid":false,"settings":{"function":"run","source":"\n\n\n// function run(resumoPedido, hour) {\n//     resumoPedido = JSON.parse(resumoPedido);\n//     hour = JSON.parse(hour);\n\n//     if (resumoPedido === null || resumoPedido === undefined){\n//     return \"Volte sempre que quiser.\"\n//     } else {\n//     if (hour >= 3 && hour < 15) return \"Bom dia\";\n//     if (hour >= 15 && hour < 21) return \"Boa tarde\";\n//     return \"Boa noite\";\n//   }\n// }\n\nfunction run(hour) {\n    hour = JSON.parse(hour);\n\n    if (hour >= 3 && hour < 15) return \"Seu pedido foi finalizado com sucesso! Tenha um bom dia.\";\n    if (hour >= 15 && hour < 21) return \"Seu pedido foi finalizado com sucesso! Tenha uma boa tarde.\";\n    return \"Seu pedido foi finalizado com sucesso! Tenha uma boa noite.\";\n}","inputVariables":["calendar.hour","resumoPedido"],"outputVariable":"fim","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF6F1E","label":"Execute script","id":"blip-tag-19b4f87e-2d0c-3a6e-d46f-6c402c782b4e","canChangeBackground":false}],"id":"32760422-4b03-4d56-8175-55801eecd9c7","root":false,"$title":"Fim","$position":{"top":"916px","left":"1599px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"312104e5-5d01-48d3-baeb-a950aea98c0d":{"$contentActions":[{"action":{"$id":"8342e6b3-7551-4720-bcc8-0b638a210b06","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"bdf1d239-0ec3-42aa-8345-ac37cd729891","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"bdf1d239-0ec3-42aa-8345-ac37cd729891","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"75451def-ce2a-40f1-a88c-eed51b46bd46","$typeOfContent":"select","type":"SendMessage","settings":{"id":"96ef967c-f8c9-400a-842f-51fd4b91a966","type":"application/vnd.lime.select+json","content":{"text":"Sobre o que você gostaria de saber?","options":[{"text":"Sobre a Pizzaria","previewText":"Sobre a Pizzaria","value":null,"index":0,"type":null},{"text":"Reservas","previewText":"Reservas","value":null,"index":1,"type":null},{"index":-1,"text":"Trabalhe conosco","previewText":"Trabalhe conosco","type":null,"value":null}]},"metadata":{}},"$cardContent":{"document":{"id":"96ef967c-f8c9-400a-842f-51fd4b91a966","type":"application/vnd.lime.select+json","content":{"text":"Sobre o que você gostaria de saber?","options":[{"text":"Sobre a Pizzaria","previewText":"Sobre a Pizzaria","value":null,"index":0,"type":null},{"text":"Reservas","previewText":"Reservas","value":null,"index":1,"type":null},{"index":-1,"text":"Trabalhe conosco","previewText":"Trabalhe conosco","type":null,"value":null}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"345fd258-9636-48b8-a71f-35f8430e90bb","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"01c6c56e-bb90-40f2-822f-61394f755adf","typeOfStateId":"state","$connId":"con_58","$id":"0b29b54f-67f7-415b-b19d-20a26dfedab2","conditions":[{"source":"input","comparison":"equals","values":["Sobre a Pizzaria"]}],"$invalid":false},{"stateId":"e9b9f5c5-207c-4859-ba3b-a500cdf2b35a","typeOfStateId":"state","$connId":"con_63","$id":"834f8455-9c29-4f1d-8621-5942baf02d8f","conditions":[{"source":"input","comparison":"equals","values":["Reservas"]}],"$invalid":false},{"stateId":"83724515-e574-4135-b1e7-5b7a49904ff7","typeOfStateId":"state","$connId":"con_68","$id":"804dcad9-8ba4-480c-b009-db27a9b34019","conditions":[{"source":"input","comparison":"contains","values":["Trabalhe conosco"]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":["Sobre a Pizzaria","Reservas","Trabalhe conosco"],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"312104e5-5d01-48d3-baeb-a950aea98c0d","root":false,"$title":"Perguntas frequentes","$position":{"top":"398px","left":"1470px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"e8bad9dd-89fd-4cfc-bb22-384f7242a465":{"$contentActions":[{"action":{"$id":"0c7dbe62-4d8f-43f0-aada-38e60b582be0","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"5639998e-2d4d-4a26-8470-56f230d06127","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"5639998e-2d4d-4a26-8470-56f230d06127","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"0d7199f4-41c7-4068-85d5-c7847ee6275c","$typeOfContent":"text","type":"SendMessage","settings":{"id":"db8942db-2d23-40fb-a067-3eabf5985d69","type":"text/plain","content":"{{greeting}} {{contact.name}}!\nSeja bem-vindo(a) a nossa pizzaria! 🍕<br>Seu protocolo de atendimento é: {{uuid}}","metadata":{}},"$cardContent":{"document":{"id":"db8942db-2d23-40fb-a067-3eabf5985d69","type":"text/plain","content":"{{greeting}} {{contact.name}}!\nSeja bem-vindo(a) a nossa pizzaria! 🍕<br>Seu protocolo de atendimento é: {{uuid}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"4f8de656-7dc4-48db-8588-22d4c7c0a80f","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"7b953b73-afc0-47c5-a96c-70703c4eaae8","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"7b953b73-afc0-47c5-a96c-70703c4eaae8","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"6ef1de2d-b60b-48a1-a577-28df236f5c0c","$typeOfContent":"text","type":"SendMessage","settings":{"id":"62e026d5-ac38-4211-a760-2ed3c185c704","type":"text/plain","content":"Estamos aqui para te ajudar a fazer um pedido, ou apenas mostrar nossos produtos!","metadata":{}},"$cardContent":{"document":{"id":"62e026d5-ac38-4211-a760-2ed3c185c704","type":"text/plain","content":"Estamos aqui para te ajudar a fazer um pedido, ou apenas mostrar nossos produtos!"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"21e9ec9a-dd12-40fa-b1fb-f8a5c660efaa","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"38c3561d-2204-4c60-b7c5-2d50617940ff","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"38c3561d-2204-4c60-b7c5-2d50617940ff","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"9530fd69-73d4-4e1f-aba5-93e803c9d34f","$typeOfContent":"select","type":"SendMessage","settings":{"id":"86b0b80c-601b-438b-b7e1-93c74f73033e","type":"application/vnd.lime.select+json","content":{"text":"Vamos lá!?","options":[{"text":"Ver cardápio","previewText":"Ver cardápio","value":null,"index":0,"type":null},{"text":"Perguntas frequentes ","previewText":"Perguntas frequentes ","value":null,"index":1,"type":null},{"text":"Ver meu pedido","previewText":"Ver meu pedido","value":null,"index":2,"type":null}]},"metadata":{}},"$cardContent":{"document":{"id":"86b0b80c-601b-438b-b7e1-93c74f73033e","type":"application/vnd.lime.select+json","content":{"text":"Vamos lá!?","options":[{"text":"Ver cardápio","previewText":"Ver cardápio","value":null,"index":0,"type":null},{"text":"Perguntas frequentes ","previewText":"Perguntas frequentes ","value":null,"index":1,"type":null},{"text":"Ver meu pedido","previewText":"Ver meu pedido","value":null,"index":2,"type":null}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"28cf1714-76ee-4274-91b2-26c722d1668c","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"3b243741-62a7-482c-bd15-05f0c2b7bec6","typeOfStateId":"state","$connId":"con_73","$id":"b4bea5d1-f365-4513-9d23-205da93f7b5a","conditions":[{"source":"input","comparison":"equals","values":["Ver cardápio"]}],"$invalid":false},{"stateId":"312104e5-5d01-48d3-baeb-a950aea98c0d","typeOfStateId":"state","$connId":"con_78","$id":"360c20e4-8827-4df8-be43-cf9f2620e812","conditions":[{"source":"input","comparison":"equals","values":["Perguntas frequentes"]}],"$invalid":false},{"stateId":"ee2dfe29-a6b0-4793-80ef-635faa11bb07","typeOfStateId":"state","$connId":"con_83","$id":"98927b32-0f59-41fb-8353-22304269690d","conditions":[{"source":"input","comparison":"contains","values":["Ver meu pedido"]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"84889779-765a-4487-b684-43032b65cb92","$typeOfContent":"","type":"ExecuteScript","$title":"Saudação","$invalid":false,"settings":{"function":"run","source":"function run(hour) {\n    hour = JSON.parse(hour);\n\n    if (hour >= 3 && hour < 15) return \"Bom dia\";\n    if (hour >= 15 && hour < 21) return \"Boa tarde\";\n    return \"Boa noite\";\n}","inputVariables":["calendar.hour"],"outputVariable":"greeting","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"8c6304e2-8a43-4f93-94b0-84e4792c4f59","$typeOfContent":"","type":"ExecuteScript","$title":"Gera uuid","$invalid":false,"settings":{"function":"run","source":"   //retorna um id unico\n   //Math.random() => retorna um número aleatório\n   //toString() => retorna uma string representando o objeto\n   //slice() => retorna uma cópia de parte de um array a partir de um subarray criado entre as posições início e fim (fim não é necessário) de um array original.\n\n\n            function run() {\n                return Math.random().toString(16).slice(2)\n            }","inputVariables":[],"outputVariable":"uuid","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"9c52218b-9a38-4508-9958-954a69bfb948","$typeOfContent":"","type":"SetVariable","$title":"Definir variável paginacao","$invalid":false,"settings":{"variable":"paginacao","value":"0"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":["Ver cardápio","Perguntas frequentes","Ver meu pedido","Perguntas frequentes "],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF6F1E","label":"Execute script","id":"blip-tag-19b4f87e-2d0c-3a6e-d46f-6c402c782b4e","canChangeBackground":false}],"id":"e8bad9dd-89fd-4cfc-bb22-384f7242a465","root":false,"$title":"Boas vindas","$position":{"top":"397px","left":"1101px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"e300265d-6829-4f22-a971-0b250b5c4fd8":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"e193a9dc-d7c1-41aa-b9d6-1f6e6c55046d","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"3b243741-62a7-482c-bd15-05f0c2b7bec6","typeOfStateId":"state","$connId":"con_88","$id":"8007df10-f97d-457c-8615-c4708d41e097","conditions":[{"source":"context","comparison":"exists","values":[],"variable":"paginacao"}],"$invalid":false}],"$enteringCustomActions":[{"$id":"e2875100-2858-4131-a2b6-da82e81ab113","$typeOfContent":"","type":"ExecuteScript","$title":"Executar script Cardápio segunda parte","$invalid":false,"settings":{"function":"run","source":"//Mostra a segunda parte do cardápio (6-10)\n//parseInt => analisa um argumento string e retorna um inteiro\n\n            function run(paginacao) {\n                paginacao = parseInt(paginacao)\n                return paginacao + 1;\n            }","inputVariables":["paginacao"],"outputVariable":"paginacao","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#FF6F1E","label":"Execute script","id":"blip-tag-19b4f87e-2d0c-3a6e-d46f-6c402c782b4e","canChangeBackground":false}],"id":"e300265d-6829-4f22-a971-0b250b5c4fd8","root":false,"$title":"Sim/ script","$position":{"top":"316px","left":"402px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"b9a733d3-1363-46a0-ae26-a2784b2adf59":{"$contentActions":[{"action":{"$id":"d873fbaf-8486-431e-b7e6-02ddec35b155","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"cf3337a6-f09c-41fc-83bc-86e7be927e0b","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"cf3337a6-f09c-41fc-83bc-86e7be927e0b","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"5312b379-6291-4b78-adcb-fc81fa99077a","$typeOfContent":"text","type":"SendMessage","settings":{"id":"67e43878-856c-4dcd-b844-bb0bf7147b5c","type":"text/plain","content":"Então, selecione o sabor que deseja:","metadata":{}},"$cardContent":{"document":{"id":"67e43878-856c-4dcd-b844-bb0bf7147b5c","type":"text/plain","content":"Então, selecione o sabor que deseja:"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"4aa49bc1-73e2-4c01-9aa7-2d5b22b823b0","type":"text/plain","textContent":"Entrada do usuário","content":"pizzaID"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"pizzaID"},"$invalid":false}],"$conditionOutputs":[{"stateId":"52c399fb-3a56-400c-adae-584c5393f64f","typeOfStateId":"state","$connId":"con_93","$id":"7398900d-b846-4a7c-8af6-c2a723a67846","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"b9a733d3-1363-46a0-ae26-a2784b2adf59","root":false,"$title":"Não","$position":{"top":"486px","left":"833px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"e9b9f5c5-207c-4859-ba3b-a500cdf2b35a":{"$contentActions":[{"action":{"$id":"2ddbf730-d9c6-40ba-82ad-4b15c70ea96b","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"2365ada6-32cb-4e4d-a25c-e69c7e7fad73","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"2365ada6-32cb-4e4d-a25c-e69c7e7fad73","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"9406d88c-cb33-47de-94aa-99980dfc3bc6","$typeOfContent":"text","type":"SendMessage","settings":{"id":"9aebdd3e-487c-4766-b133-0bdf57cd0b25","type":"text/plain","content":"{{resource.reserva}}","metadata":{}},"$cardContent":{"document":{"id":"9aebdd3e-487c-4766-b133-0bdf57cd0b25","type":"text/plain","content":"{{resource.reserva}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"c95ec541-3803-4ae4-8daf-1cbbc124a71c","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"1e5e25a3-4545-44be-8bf3-129a4e091d18","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"1e5e25a3-4545-44be-8bf3-129a4e091d18","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"cb1b34d7-1bca-4846-9e84-edc30987d126","$typeOfContent":"select-immediate","type":"SendMessage","settings":{"id":"e48a739f-8e90-4f6f-bdd2-24f8e8718beb","type":"application/vnd.lime.select+json","content":{"text":"Deseja voltar para o início ou prefere ir logo para o cardápio? ","scope":"immediate","options":[{"text":"Quero ver o cardápio.","previewText":"Quero ver o cardápio.","value":null,"index":0,"type":null},{"text":"Desejo voltar para o início.","previewText":"Desejo voltar para o início.","value":null,"index":1,"type":null}]},"metadata":{}},"$cardContent":{"document":{"id":"e48a739f-8e90-4f6f-bdd2-24f8e8718beb","type":"application/vnd.lime.select+json","content":{"text":"Deseja voltar para o início ou prefere ir logo para o cardápio? ","scope":"immediate","options":[{"text":"Quero ver o cardápio.","previewText":"Quero ver o cardápio.","value":null,"index":0,"type":null},{"text":"Desejo voltar para o início.","previewText":"Desejo voltar para o início.","value":null,"index":1,"type":null}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"3e889a79-68da-41f0-a752-77282fb4e1c7","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"3b243741-62a7-482c-bd15-05f0c2b7bec6","typeOfStateId":"state","$connId":"con_98","$id":"d4d2bc19-d629-4f0f-9454-f91f0fe6b88f","conditions":[{"source":"input","comparison":"equals","values":["Quero ver o cardápio."]}],"$invalid":false},{"stateId":"e8bad9dd-89fd-4cfc-bb22-384f7242a465","typeOfStateId":"state","$connId":"con_103","$id":"1c0dc2bd-9ad6-414d-9652-af4bc332ccac","conditions":[{"source":"input","comparison":"contains","values":["Desejo voltar para o início."]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":["Quero ver o cardápio.","Desejo voltar para o início."],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"e9b9f5c5-207c-4859-ba3b-a500cdf2b35a","root":false,"$title":"Reservas","$position":{"top":"395px","left":"1812px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"01c6c56e-bb90-40f2-822f-61394f755adf":{"$contentActions":[{"action":{"$id":"1de97a08-e196-40ff-9f35-f65141c746e9","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"ab8aba6e-414f-4301-8d6a-74be6c5e40d3","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"ab8aba6e-414f-4301-8d6a-74be6c5e40d3","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"d3f050fd-0e91-4ca7-847d-f56695cf3252","$typeOfContent":"text","type":"SendMessage","settings":{"id":"0ea3436c-4c04-4e97-bb50-e6f63d31c0d5","type":"text/plain","content":"{{resource.sobre}}","metadata":{}},"$cardContent":{"document":{"id":"0ea3436c-4c04-4e97-bb50-e6f63d31c0d5","type":"text/plain","content":"{{resource.sobre}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"57bdc794-175b-4901-a5b0-1cec7f400105","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"5eedf958-ae64-4fb0-974d-d59af954ed2e","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"5eedf958-ae64-4fb0-974d-d59af954ed2e","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"dbfdd6b2-1152-4e2d-b6ef-7b33b839e314","$typeOfContent":"select-immediate","type":"SendMessage","settings":{"id":"4fb1c89f-ed03-49b0-a0b7-9d3017f80819","type":"application/vnd.lime.select+json","content":{"text":"Deseja voltar para o início ou prefere ir logo para o cardápio? ","scope":"immediate","options":[{"text":"Quero ver o cardápio","previewText":"Quero ver o cardápio","value":null,"index":0,"type":null},{"text":"Desejo voltar para o início. ","previewText":"Desejo voltar para o início. ","value":null,"index":1,"type":null}]},"metadata":{}},"$cardContent":{"document":{"id":"4fb1c89f-ed03-49b0-a0b7-9d3017f80819","type":"application/vnd.lime.select+json","content":{"text":"Deseja voltar para o início ou prefere ir logo para o cardápio? ","scope":"immediate","options":[{"text":"Quero ver o cardápio","previewText":"Quero ver o cardápio","value":null,"index":0,"type":null},{"text":"Desejo voltar para o início. ","previewText":"Desejo voltar para o início. ","value":null,"index":1,"type":null}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"9e89b489-c774-46d5-b6fa-3f6c87e845ad","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"3b243741-62a7-482c-bd15-05f0c2b7bec6","typeOfStateId":"state","$connId":"con_108","$id":"dcee3e52-5432-4451-a854-f9b513b917db","conditions":[{"source":"input","comparison":"equals","values":["Quero ver o cardápio"]}],"$invalid":false},{"stateId":"e8bad9dd-89fd-4cfc-bb22-384f7242a465","typeOfStateId":"state","$connId":"con_113","$id":"7584b7f0-fc62-4cba-884b-516001328f9b","conditions":[{"source":"input","comparison":"contains","values":["Desejo voltar para o início."]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":["Quero ver o cardápio","Desejo voltar para o início. "],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"01c6c56e-bb90-40f2-822f-61394f755adf","root":false,"$title":"Sobre a pizzaria","$position":{"top":"304px","left":"1813px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"83724515-e574-4135-b1e7-5b7a49904ff7":{"$contentActions":[{"action":{"$id":"e12cd830-7e43-484a-baa7-1ddb18d0f7e2","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"c221c18d-dc1b-44d7-babd-b559e411331e","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"c221c18d-dc1b-44d7-babd-b559e411331e","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"0d65cb8e-e21b-4c79-9b6f-5bcd9b791979","$typeOfContent":"text","type":"SendMessage","settings":{"id":"e76d3128-54ab-4050-8ca1-50d47290dd4a","type":"text/plain","content":"{{resource.trabalhe}","metadata":{}},"$cardContent":{"document":{"id":"e76d3128-54ab-4050-8ca1-50d47290dd4a","type":"text/plain","content":"{{resource.trabalhe}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"74b90a45-cd69-42a7-9831-3d584d853bb4","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"9689ffef-a42c-4559-8b03-0de53558c27a","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"9689ffef-a42c-4559-8b03-0de53558c27a","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"53d60a04-3c52-49df-b83c-c1c686825ec0","$typeOfContent":"select-immediate","type":"SendMessage","settings":{"id":"ae623e81-0637-43f6-88a3-8a778f0d6335","type":"application/vnd.lime.select+json","content":{"text":"Deseja voltar para o início ou prefere ir logo para o cardápio? ","scope":"immediate","options":[{"text":"Quero ver o cardápio.","previewText":"Quero ver o cardápio.","value":null,"index":0,"type":null},{"text":"Desejo voltar para o início.","previewText":"Desejo voltar para o início.","value":null,"index":1,"type":null}]},"metadata":{}},"$cardContent":{"document":{"id":"ae623e81-0637-43f6-88a3-8a778f0d6335","type":"application/vnd.lime.select+json","content":{"text":"Deseja voltar para o início ou prefere ir logo para o cardápio? ","scope":"immediate","options":[{"text":"Quero ver o cardápio.","previewText":"Quero ver o cardápio.","value":null,"index":0,"type":null},{"text":"Desejo voltar para o início.","previewText":"Desejo voltar para o início.","value":null,"index":1,"type":null}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"3d5afc94-20be-4bc3-8d0c-aca0922f01ad","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"3b243741-62a7-482c-bd15-05f0c2b7bec6","typeOfStateId":"state","$connId":"con_118","$id":"8e256fcc-047a-472e-88b4-767e77a80f7b","conditions":[{"source":"input","comparison":"equals","values":["Quero ver o cardápio."]}],"$invalid":false},{"stateId":"e8bad9dd-89fd-4cfc-bb22-384f7242a465","typeOfStateId":"state","$connId":"con_123","$id":"841bb56b-cf38-43e9-ab42-ab8e349525c0","conditions":[{"source":"input","comparison":"contains","values":["Desejo voltar para o início."]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":["Quero ver o cardápio.","Desejo voltar para o início."],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"83724515-e574-4135-b1e7-5b7a49904ff7","root":false,"$title":"Trabalhe conosco","$position":{"top":"497px","left":"1815px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"6b0f98cb-ccf8-4c16-9392-6bfa0e51e1aa":{"$contentActions":[{"action":{"$id":"be75dba0-44ee-40ae-b6c9-e853497f64c2","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"f8e67652-d326-4258-8785-6667d8e59880","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"f8e67652-d326-4258-8785-6667d8e59880","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"2a451423-4a25-4ce8-a055-dc6c2c7424a9","$typeOfContent":"text","type":"SendMessage","settings":{"id":"a98fdc9a-3f57-43e9-87bd-afda9910c953","type":"text/plain","content":"{{mostrarPedido}}","metadata":{}},"$cardContent":{"document":{"id":"a98fdc9a-3f57-43e9-87bd-afda9910c953","type":"text/plain","content":"{{mostrarPedido}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"b9ce838c-233f-4cb6-aaaf-d035be2d6a5d","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"297ba83f-7775-4589-887e-f6b9ae8fba4f","$typeOfContent":"","type":"ProcessHttp","$title":"Requisição HTTP Protocolo Pedido","$invalid":false,"settings":{"headers":{},"method":"GET","uri":"https://api-rest-magda.herokuapp.com/pedidos/{{protocolo}}","responseBodyVariable":"retornaProtocolo"},"conditions":[]},{"$id":"6ff40020-b222-4779-906e-de3112b84c15","$typeOfContent":"","type":"ExecuteScript","$title":"Executar script - Mostrar o pedido","$invalid":false,"settings":{"function":"run","source":"//srcript para retornar o protocolo do pedido\n\nfunction run(pedidoFinal) {\n    pedidoFinal = JSON.parse(pedidoFinal)\n    let sabores = ''\n    let precoFinal = 0\n\n    if (pedidoFinal.length > 0) {\n        pedidoFinal.forEach(e => {\n            sabores += `${e.sabor}, `\n            precoFinal += parseInt(e.preco)\n        })\n\n        let precoFinal = precoFinal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })\n\n        return `Você escolheu ${sabores} e o valor final ficou R$ ${precoFinal}`\n\n    } else {\n        return \"Não foi encontrado nenhum pedido neste protocolo.\"\n    }\n}\n\n","inputVariables":["retornaProtocolo"],"outputVariable":"mostrarPedido","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"background":"#7762E3","label":"Process HTTP","id":"blip-tag-fa2787d2-31fa-f42c-20b4-329376e1776e","canChangeBackground":false}],"id":"6b0f98cb-ccf8-4c16-9392-6bfa0e51e1aa","root":false,"$title":"Retorna pedidos (protocolo)","$position":{"top":"67px","left":"773px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"ee2dfe29-a6b0-4793-80ef-635faa11bb07":{"$contentActions":[{"action":{"$id":"5e1e0d17-ee61-4559-a44c-b282e037b78d","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"a74b0352-7b1d-4f37-8243-9b21f9176166","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"a74b0352-7b1d-4f37-8243-9b21f9176166","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"077fdc73-fb2a-4e3c-b38a-97bc0d0f6937","$typeOfContent":"text","type":"SendMessage","settings":{"id":"c421f56a-6a17-423b-be83-0fca9ddb0084","type":"text/plain","content":"Para que possamos localizar seu pedido, por favor informe seu protocolo de atendimento, gerado no início da conversa. ","metadata":{}},"$cardContent":{"document":{"id":"c421f56a-6a17-423b-be83-0fca9ddb0084","type":"text/plain","content":"Para que possamos localizar seu pedido, por favor informe seu protocolo de atendimento, gerado no início da conversa. "},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"0087b58a-065f-4cc7-8663-9391525b86ed","type":"text/plain","textContent":"Entrada do usuário","content":"protocolo"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"protocolo"},"$invalid":false}],"$conditionOutputs":[{"stateId":"6b0f98cb-ccf8-4c16-9392-6bfa0e51e1aa","typeOfStateId":"state","$connId":"con_128","$id":"d60b464b-0949-4aea-8cb3-2c4f39c79f0d","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"ee2dfe29-a6b0-4793-80ef-635faa11bb07","root":false,"$title":"Informe seu protocolo","$position":{"top":"89px","left":"1100px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}},"globalAction":{"$contentActions":[],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"global-actions","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false}}